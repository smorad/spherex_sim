<?xml version='1.0'?>
<sdf version='1.4'>
    <model name="SphereX">
        <!-- Give the base link a unique name -->
        <link name="SphereXOuter">
            <pose>0 0 1 1.57 0 0</pose>
            <inertial>
                <mass>2.5</mass>
                <inertia>
                    <ixx>0.0</ixx>
                    <iyy>0.0</iyy>
                    <izz>0.0</izz>
                    <ixy>0</ixy>
                    <ixz>0</ixz>
                    <iyz>0</iyz> 
                </inertia> 
            </inertial>
            <visual name="bottom_visual">
                <geometry>
                    <mesh>
                        <uri>model://spherex/spherex_bot.dae</uri>
                    </mesh>
                </geometry>
            </visual>

            <visual name="top_visual">
                <geometry>
                    <mesh>
                        <uri>model://spherex/spherex_top.dae</uri>
                    </mesh>
                </geometry>
            </visual>

            <collision name="spherex_collision">
                <geometry>
                    <sphere>
                        <radius>0.25</radius>
                    </sphere>
                </geometry>
            </collision>

        </link>

        <link name="SphereXMid">

            <!-- lidar sensor config -->
            <!-- Add a ray sensor, and give it a name -->
            <sensor type="ray" name="sensor">
                <topic>~/test_topic</topic>

                <!-- Position the ray sensor based on the specification. Also rotate
                it by 90 degrees around the X-axis so that the <horizontal> rays
                become vertical -->
                <pose>0 0 0 -1.57 0 0</pose>

                <!-- Enable visualization to see the rays in the GUI -->
                <visualize>true</visualize>

                <!-- Set the update rate of the sensor -->
                <update_rate>1</update_rate>
                <ray>

                    <!-- The scan element contains the horizontal and vertical beams.
                    We are leaving out the vertical beams for this tutorial. -->
                    <scan>

                        <!-- The horizontal beams -->
                        <vertical>
                            <!-- The velodyne has 32 beams(samples) -->
                            <samples>2</samples>

                            <!-- Resolution is multiplied by samples to determine number of
                            simulated beams vs interpolated beams. See:
                            http://sdformat.org/spec?ver=1.6&elem=sensor#horizontal_resolution
                            -->
                            <resolution>1</resolution>

                            <!-- Minimum angle in radians -->
                            <min_angle>0</min_angle>

                            <!-- Maximum angle in radians -->
                            <max_angle>0.3</max_angle>
                        </vertical>
                        
                        <horizontal>
                            <samples>4</samples>
                            <resolution>1</resolution>
                            <min_angle>0.0</min_angle>
                            <max_angle>6.28</max_angle>
                        </horizontal>
                       
                        <!--                      <vertical>
                            <min_angle>0</min_angle>
                            <max_angle>6.28</max_angle>
                            <samples>32</samples>
                            <resolution>1</resolution>
                        </vertical>-->
                    </scan>

                    <!-- Range defines characteristics of an individual beam -->
                    <range>

                        <!-- Minimum distance of the beam -->
                        <min>0.28</min>

                        <!-- Maximum distance of the beam -->
                        <max>10</max>

                        <!-- Linear resolution of the beam -->
                        <resolution>0.02</resolution>
                    </range>
                </ray>
            </sensor>

            <pose>0 0 1 1.57 0 0</pose>
            <inertial>
                <mass>0.5</mass>
                <inertia>
                    <ixx>0</ixx>
                    <iyy>0</iyy>
                    <izz>0</izz>
                    <ixy>0</ixy>
                    <ixz>0</ixz>
                    <iyz>0</iyz> 
                </inertia> 
            </inertial>

            <!-- The visual is mostly a copy of the collision -->
            <visual name="mid_visual">
                <geometry>
                    <mesh>
                        <uri>model://spherex/spherex_mid.dae</uri>
                    </mesh>
                </geometry>
            </visual>
        </link>

        <joint name="center_pivot" type="revolute">
            <parent>SphereXOuter</parent>
            <child>SphereXMid</child>
            <axis>
                <limit>
                    <lower>0</lower>
                    <upper>10000000000000000</upper>
                </limit>
                <xyz>0 0 1</xyz>
            </axis>
        </joint>
    </model>
</sdf>
